# Tauri æ¡Œé¢åº”ç”¨å¼€å‘æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

#### å¿…éœ€è½¯ä»¶å®‰è£…é¡ºåºï¼š

1. **Node.js** (æ¨è LTS ç‰ˆæœ¬)
   ```bash
   # ä¸‹è½½åœ°å€ï¼šhttps://nodejs.org/
   # éªŒè¯å®‰è£…
   node --version
   npm --version
   ```

2. **Rust** (å¿…éœ€)
   ```bash
   # Windows: ä¸‹è½½ rustup-init.exe
   # https://rustup.rs/
   
   # macOS/Linux:
   curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
   
   # éªŒè¯å®‰è£…
   rustc --version
   cargo --version
   ```

3. **Tauri CLI**
   ```bash
   npm install -g @tauri-apps/cli
   
   # éªŒè¯å®‰è£…
   tauri --version
   ```

### 2. é¡¹ç›®åˆå§‹åŒ–

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd frontend-desktop

# 2. å®‰è£… Node.js ä¾èµ–
npm install

# 3. é¦–æ¬¡æ„å»º Rust ä¾èµ–ï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰
npm run tauri build --debug
```

### 3. å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# æ–¹å¼1ï¼šåŒæ—¶å¯åŠ¨å‰ç«¯å’Œæ¡Œé¢åº”ç”¨
npm run tauri:dev

# æ–¹å¼2ï¼šåˆ†åˆ«å¯åŠ¨ï¼ˆè°ƒè¯•ç”¨ï¼‰
# ç»ˆç«¯1ï¼šå¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev

# ç»ˆç«¯2ï¼šå¯åŠ¨ Tauri åº”ç”¨
tauri dev
```

## ğŸ› ï¸ å¼€å‘æµç¨‹

### æ—¥å¸¸å¼€å‘æ­¥éª¤

1. **å¯åŠ¨åç«¯æœåŠ¡**
   ```bash
   # åœ¨ spring-boot-demo ç›®å½•
   mvn spring-boot:run
   ```

2. **å¯åŠ¨æ¡Œé¢åº”ç”¨å¼€å‘æ¨¡å¼**
   ```bash
   # åœ¨ frontend-desktop ç›®å½•
   npm run tauri:dev
   ```

3. **ä»£ç ä¿®æ”¹**
   - React ä»£ç ä¿®æ”¹ï¼šè‡ªåŠ¨çƒ­é‡è½½
   - Rust ä»£ç ä¿®æ”¹ï¼šéœ€è¦é‡å¯ `tauri:dev`

### è°ƒè¯•æŠ€å·§

1. **å‰ç«¯è°ƒè¯•**
   - å³é”® â†’ æ£€æŸ¥å…ƒç´  â†’ å¼€å‘è€…å·¥å…·
   - Console æŸ¥çœ‹ JavaScript æ—¥å¿—
   - Network æŸ¥çœ‹ API è¯·æ±‚

2. **Rust è°ƒè¯•**
   - ä½¿ç”¨ `println!` è¾“å‡ºæ—¥å¿—
   - æŸ¥çœ‹ç»ˆç«¯è¾“å‡º
   - ä½¿ç”¨ `dbg!` å®è°ƒè¯•å˜é‡

3. **API è°ƒè¯•**
   ```javascript
   // åœ¨æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯• Tauri å‘½ä»¤
   window.__TAURI__.invoke('get_app_version').then(console.log);
   ```

## ğŸ“ é¡¹ç›®ç»“æ„è¯¦è§£

```
frontend-desktop/
â”œâ”€â”€ src/                          # React å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/               # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx         # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”‚   â”œâ”€â”€ LoginForm.jsx         # ç™»å½•è¡¨å•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Settings.jsx          # è®¾ç½®é¡µé¢
â”‚   â”‚   â””â”€â”€ UserList.jsx          # ç”¨æˆ·åˆ—è¡¨é¡µé¢
â”‚   â”œâ”€â”€ services/                 # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ tauriAPI.js           # Tauri API å°è£…
â”‚   â”œâ”€â”€ App.jsx                   # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ App.css                   # åº”ç”¨æ ·å¼
â”‚   â”œâ”€â”€ main.jsx                  # React å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ index.css                 # å…¨å±€æ ·å¼
â”œâ”€â”€ src-tauri/                    # Tauri Rust åç«¯
â”‚   â”œâ”€â”€ src/                      # Rust æºç 
â”‚   â”‚   â”œâ”€â”€ commands.rs           # Tauri å‘½ä»¤å®ç°
â”‚   â”‚   â””â”€â”€ main.rs               # Rust ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ icons/                    # åº”ç”¨å›¾æ ‡
â”‚   â”œâ”€â”€ Cargo.toml                # Rust é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ tauri.conf.json           # Tauri åº”ç”¨é…ç½®
â”‚   â””â”€â”€ build.rs                  # æ„å»ºè„šæœ¬
â”œâ”€â”€ package.json                  # Node.js é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.js                # Vite æ„å»ºé…ç½®
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### 1. `src/services/tauriAPI.js`
å°è£…æ‰€æœ‰ Tauri å‘½ä»¤è°ƒç”¨ï¼Œæä¾›ç»Ÿä¸€çš„ API æ¥å£ã€‚

```javascript
// ç¤ºä¾‹ï¼šè°ƒç”¨ Rust å‘½ä»¤
const result = await TauriAPI.login('admin', '123456');
```

### 2. `src-tauri/src/commands.rs`
å®šä¹‰æ‰€æœ‰ Tauri å‘½ä»¤çš„ Rust å®ç°ã€‚

```rust
#[command]
pub async fn login(request: LoginRequest) -> Result<ApiResponse<HashMap<String, String>>, String> {
    // å®ç°ç™»å½•é€»è¾‘
}
```

### 3. `src-tauri/tauri.conf.json`
Tauri åº”ç”¨çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ã€‚

```json
{
  "package": {
    "productName": "ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ",
    "version": "1.0.0"
  },
  "tauri": {
    "allowlist": {
      // æƒé™é…ç½®
    },
    "windows": [
      // çª—å£é…ç½®
    ]
  }
}
```

## ğŸ¯ å¼€å‘æœ€ä½³å®è·µ

### 1. ä»£ç ç»„ç»‡

- **ç»„ä»¶åŒ–**ï¼šå°† UI æ‹†åˆ†ä¸ºå¯å¤ç”¨ç»„ä»¶
- **æœåŠ¡å±‚**ï¼šAPI è°ƒç”¨ç»Ÿä¸€å°è£…åœ¨ services ç›®å½•
- **çŠ¶æ€ç®¡ç†**ï¼šä½¿ç”¨ React Hooks ç®¡ç†ç»„ä»¶çŠ¶æ€
- **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

### 2. Tauri å‘½ä»¤è®¾è®¡

```rust
// âœ… å¥½çš„è®¾è®¡ï¼šè¿”å›ç»Ÿä¸€çš„ ApiResponse
#[command]
pub async fn get_users(token: String) -> Result<ApiResponse<Vec<User>>, String> {
    // å®ç°
}

// âŒ é¿å…ï¼šç›´æ¥è¿”å›åŸå§‹æ•°æ®
#[command]
pub async fn get_users(token: String) -> Result<Vec<User>, String> {
    // ä¸æ¨è
}
```

### 3. é”™è¯¯å¤„ç†

```javascript
// âœ… å‰ç«¯ç»Ÿä¸€é”™è¯¯å¤„ç†
try {
    const result = await TauriAPI.getUsers();
    if (result.success) {
        setUsers(result.data);
    } else {
        message.error(result.message);
    }
} catch (error) {
    message.error('æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
}
```

### 4. ç¦»çº¿æ”¯æŒ

```javascript
// âœ… å®ç°ç¦»çº¿ç¼“å­˜
const loadUsers = async () => {
    if (!serverStatus) {
        // ç¦»çº¿æ¨¡å¼ï¼šä»æœ¬åœ°å­˜å‚¨åŠ è½½
        const cachedUsers = await TauriAPI.loadFromLocalStorage('users_cache');
        setUsers(cachedUsers || []);
    } else {
        // åœ¨çº¿æ¨¡å¼ï¼šä»æœåŠ¡å™¨è·å–å¹¶ç¼“å­˜
        const result = await TauriAPI.getUsers();
        if (result.success) {
            setUsers(result.data);
            await TauriAPI.saveToLocalStorage('users_cache', result.data);
        }
    }
};
```

## ğŸ”¨ æ„å»ºå’Œæ‰“åŒ…

### å¼€å‘æ„å»º
```bash
# å¿«é€Ÿæ„å»ºï¼ˆè°ƒè¯•ç‰ˆæœ¬ï¼‰
npm run tauri build --debug
```

### ç”Ÿäº§æ„å»º
```bash
# å®Œæ•´æ„å»ºï¼ˆå‘å¸ƒç‰ˆæœ¬ï¼‰
npm run tauri:build
```

### æ„å»ºè¾“å‡º
- **Windows**: `src-tauri/target/release/user-management-desktop.exe`
- **macOS**: `src-tauri/target/release/bundle/dmg/`
- **Linux**: `src-tauri/target/release/bundle/deb/`

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### 1. Rust ç¼–è¯‘é”™è¯¯

```bash
# æ›´æ–° Rust å·¥å…·é“¾
rustup update

# æ¸…ç†æ„å»ºç¼“å­˜
cd src-tauri
cargo clean
cd ..
npm run tauri:build
```

### 2. ä¾èµ–å®‰è£…å¤±è´¥

```bash
# æ¸…ç† npm ç¼“å­˜
npm cache clean --force

# åˆ é™¤ node_modules é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

### 3. Tauri å‘½ä»¤è°ƒç”¨å¤±è´¥

æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
- Rust å‘½ä»¤æ˜¯å¦æ­£ç¡®æ³¨å†Œåœ¨ `main.rs`
- å‰ç«¯è°ƒç”¨çš„å‘½ä»¤åæ˜¯å¦ä¸ Rust å‡½æ•°åä¸€è‡´
- å‚æ•°ç±»å‹æ˜¯å¦åŒ¹é…

### 4. ç½‘ç»œè¯·æ±‚å¤±è´¥

```rust
// åœ¨ commands.rs ä¸­æ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
let response = client
    .post(&url)
    .json(&request)
    .send()
    .await
    .map_err(|e| {
        eprintln!("ç½‘ç»œè¯·æ±‚è¯¦ç»†é”™è¯¯: {:?}", e);
        format!("ç½‘ç»œè¯·æ±‚å¤±è´¥: {}", e)
    })?;
```

## ğŸ“š å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/v1/guides/)
- [Rust å®˜æ–¹æ•™ç¨‹](https://doc.rust-lang.org/book/)
- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [Ant Design ç»„ä»¶åº“](https://ant.design/)

### æ¨èæ•™ç¨‹
- [Tauri å¿«é€Ÿå…¥é—¨](https://tauri.app/v1/guides/getting-started/prerequisites)
- [Rust è¯­è¨€åœ£ç»](https://course.rs/)
- [React Hooks æ•™ç¨‹](https://react.dev/reference/react)

## ğŸš€ è¿›é˜¶åŠŸèƒ½

### 1. æ·»åŠ æ–°çš„ Tauri å‘½ä»¤

1. **åœ¨ `commands.rs` ä¸­å®šä¹‰å‘½ä»¤**
   ```rust
   #[command]
   pub async fn my_new_command(param: String) -> Result<String, String> {
       Ok(format!("Hello, {}", param))
   }
   ```

2. **åœ¨ `main.rs` ä¸­æ³¨å†Œå‘½ä»¤**
   ```rust
   .invoke_handler(tauri::generate_handler![
       // ... å…¶ä»–å‘½ä»¤
       my_new_command
   ])
   ```

3. **åœ¨å‰ç«¯è°ƒç”¨å‘½ä»¤**
   ```javascript
   const result = await invoke('my_new_command', { param: 'World' });
   ```

### 2. æ·»åŠ ç³»ç»Ÿæ‰˜ç›˜

åœ¨ `tauri.conf.json` ä¸­é…ç½®ï¼š
```json
{
  "tauri": {
    "systemTray": {
      "iconPath": "icons/icon.png",
      "menuOnLeftClick": false
    }
  }
}
```

### 3. è‡ªåŠ¨æ›´æ–°åŠŸèƒ½

```json
{
  "tauri": {
    "updater": {
      "active": true,
      "endpoints": ["https://your-update-server.com/updates"]
    }
  }
}
```

## ğŸ’¡ å¼€å‘æŠ€å·§

1. **ä½¿ç”¨ Rust çš„ `serde` è¿›è¡Œ JSON åºåˆ—åŒ–**
2. **åˆ©ç”¨ React çš„ `useEffect` ç®¡ç†å‰¯ä½œç”¨**
3. **ä½¿ç”¨ Ant Design çš„ `message` ç»„ä»¶æ˜¾ç¤ºæç¤º**
4. **é€šè¿‡ `localStorage` å®ç°ç®€å•çš„çŠ¶æ€æŒä¹…åŒ–**
5. **ä½¿ç”¨ Tauri çš„ `notification` API æ˜¾ç¤ºç³»ç»Ÿé€šçŸ¥**

è®°ä½ï¼šTauri ç»“åˆäº† Web æŠ€æœ¯çš„çµæ´»æ€§å’ŒåŸç”Ÿåº”ç”¨çš„æ€§èƒ½ï¼Œæ˜¯æ„å»ºç°ä»£æ¡Œé¢åº”ç”¨çš„ç»ä½³é€‰æ‹©ï¼